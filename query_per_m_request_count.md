# 查询每分钟url资源请求的数量
```
$ curl -XGET "http://localhost:9200/filebeat-*/_search" -H 'Content-Type: application/json' -d'
{"query": {
    "bool": {
      "filter": [
        {
          "range": {
            "@timestamp": {
              "from": "2018-08-31 12:00:00.0 +0800",
              "to": "2018-09-01 00:00:00.0 +0800",
              "include_lower": true,
              "include_upper": true,
              "format": "yyyy-MM-dd HH:mm:ss.SSS Z",
              "boost": 1
            }
          }
        }
      ]
    }
  },
  "size": 0,
  "aggs": {
    "sales_over_time": {
      "date_histogram": {
        "field": "@timestamp",
        "interval": "minute",
        "time_zone": "+08:00"
      }
    }
  }
}' | python -m json.tool
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 10698  100 10097  100   601   999k  60940 --:--:-- --:--:-- --:--:-- 1095k
{
    "_shards": {
        "failed": 0,
        "skipped": 0,
        "successful": 6,
        "total": 6
    },
    "aggregations": {
        "sales_over_time": {
            "buckets": [
                {
                    "doc_count": 21,
                    "key": 1535691300000,
                    "key_as_string": "2018-08-31T12:55:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691360000,
                    "key_as_string": "2018-08-31T12:56:00.000+08:00"
                },
                {
                    "doc_count": 1,
                    "key": 1535691420000,
                    "key_as_string": "2018-08-31T12:57:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691480000,
                    "key_as_string": "2018-08-31T12:58:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691540000,
                    "key_as_string": "2018-08-31T12:59:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691600000,
                    "key_as_string": "2018-08-31T13:00:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691660000,
                    "key_as_string": "2018-08-31T13:01:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691720000,
                    "key_as_string": "2018-08-31T13:02:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691780000,
                    "key_as_string": "2018-08-31T13:03:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691840000,
                    "key_as_string": "2018-08-31T13:04:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691900000,
                    "key_as_string": "2018-08-31T13:05:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535691960000,
                    "key_as_string": "2018-08-31T13:06:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535692020000,
                    "key_as_string": "2018-08-31T13:07:00.000+08:00"
                },
                {
                    "doc_count": 0,
                    "key": 1535692080000,
                    "key_as_string": "2018-08-31T13:08:00.000+08:00"
                },
                {
                    "doc_count": 4,
                    "key": 1535692140000,
                    "key_as_string": "2018-08-31T13:09:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692200000,
                    "key_as_string": "2018-08-31T13:10:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535692260000,
                    "key_as_string": "2018-08-31T13:11:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692320000,
                    "key_as_string": "2018-08-31T13:12:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692380000,
                    "key_as_string": "2018-08-31T13:13:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692440000,
                    "key_as_string": "2018-08-31T13:14:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692500000,
                    "key_as_string": "2018-08-31T13:15:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535692560000,
                    "key_as_string": "2018-08-31T13:16:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692620000,
                    "key_as_string": "2018-08-31T13:17:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692680000,
                    "key_as_string": "2018-08-31T13:18:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692740000,
                    "key_as_string": "2018-08-31T13:19:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692800000,
                    "key_as_string": "2018-08-31T13:20:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535692860000,
                    "key_as_string": "2018-08-31T13:21:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535692920000,
                    "key_as_string": "2018-08-31T13:22:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535692980000,
                    "key_as_string": "2018-08-31T13:23:00.000+08:00"
                },
                {
                    "doc_count": 4,
                    "key": 1535693040000,
                    "key_as_string": "2018-08-31T13:24:00.000+08:00"
                },
                {
                    "doc_count": 3,
                    "key": 1535693100000,
                    "key_as_string": "2018-08-31T13:25:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535693160000,
                    "key_as_string": "2018-08-31T13:26:00.000+08:00"
                },
                {
                    "doc_count": 4,
                    "key": 1535693220000,
                    "key_as_string": "2018-08-31T13:27:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693280000,
                    "key_as_string": "2018-08-31T13:28:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693340000,
                    "key_as_string": "2018-08-31T13:29:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693400000,
                    "key_as_string": "2018-08-31T13:30:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535693460000,
                    "key_as_string": "2018-08-31T13:31:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693520000,
                    "key_as_string": "2018-08-31T13:32:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693580000,
                    "key_as_string": "2018-08-31T13:33:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693640000,
                    "key_as_string": "2018-08-31T13:34:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693700000,
                    "key_as_string": "2018-08-31T13:35:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535693760000,
                    "key_as_string": "2018-08-31T13:36:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693820000,
                    "key_as_string": "2018-08-31T13:37:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693880000,
                    "key_as_string": "2018-08-31T13:38:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535693940000,
                    "key_as_string": "2018-08-31T13:39:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535694000000,
                    "key_as_string": "2018-08-31T13:40:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694060000,
                    "key_as_string": "2018-08-31T13:41:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694120000,
                    "key_as_string": "2018-08-31T13:42:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694180000,
                    "key_as_string": "2018-08-31T13:43:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694240000,
                    "key_as_string": "2018-08-31T13:44:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535694300000,
                    "key_as_string": "2018-08-31T13:45:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694360000,
                    "key_as_string": "2018-08-31T13:46:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694420000,
                    "key_as_string": "2018-08-31T13:47:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694480000,
                    "key_as_string": "2018-08-31T13:48:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694540000,
                    "key_as_string": "2018-08-31T13:49:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535694600000,
                    "key_as_string": "2018-08-31T13:50:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694660000,
                    "key_as_string": "2018-08-31T13:51:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694720000,
                    "key_as_string": "2018-08-31T13:52:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694780000,
                    "key_as_string": "2018-08-31T13:53:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694840000,
                    "key_as_string": "2018-08-31T13:54:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535694900000,
                    "key_as_string": "2018-08-31T13:55:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535694960000,
                    "key_as_string": "2018-08-31T13:56:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695020000,
                    "key_as_string": "2018-08-31T13:57:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695080000,
                    "key_as_string": "2018-08-31T13:58:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695140000,
                    "key_as_string": "2018-08-31T13:59:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535695200000,
                    "key_as_string": "2018-08-31T14:00:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695260000,
                    "key_as_string": "2018-08-31T14:01:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695320000,
                    "key_as_string": "2018-08-31T14:02:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695380000,
                    "key_as_string": "2018-08-31T14:03:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695440000,
                    "key_as_string": "2018-08-31T14:04:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535695500000,
                    "key_as_string": "2018-08-31T14:05:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695560000,
                    "key_as_string": "2018-08-31T14:06:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695620000,
                    "key_as_string": "2018-08-31T14:07:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695680000,
                    "key_as_string": "2018-08-31T14:08:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695740000,
                    "key_as_string": "2018-08-31T14:09:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535695800000,
                    "key_as_string": "2018-08-31T14:10:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695860000,
                    "key_as_string": "2018-08-31T14:11:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695920000,
                    "key_as_string": "2018-08-31T14:12:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535695980000,
                    "key_as_string": "2018-08-31T14:13:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696040000,
                    "key_as_string": "2018-08-31T14:14:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535696100000,
                    "key_as_string": "2018-08-31T14:15:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696160000,
                    "key_as_string": "2018-08-31T14:16:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696220000,
                    "key_as_string": "2018-08-31T14:17:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696280000,
                    "key_as_string": "2018-08-31T14:18:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696340000,
                    "key_as_string": "2018-08-31T14:19:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696400000,
                    "key_as_string": "2018-08-31T14:20:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535696460000,
                    "key_as_string": "2018-08-31T14:21:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696520000,
                    "key_as_string": "2018-08-31T14:22:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696580000,
                    "key_as_string": "2018-08-31T14:23:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696640000,
                    "key_as_string": "2018-08-31T14:24:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696700000,
                    "key_as_string": "2018-08-31T14:25:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535696760000,
                    "key_as_string": "2018-08-31T14:26:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696820000,
                    "key_as_string": "2018-08-31T14:27:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696880000,
                    "key_as_string": "2018-08-31T14:28:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535696940000,
                    "key_as_string": "2018-08-31T14:29:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697000000,
                    "key_as_string": "2018-08-31T14:30:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535697060000,
                    "key_as_string": "2018-08-31T14:31:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697120000,
                    "key_as_string": "2018-08-31T14:32:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697180000,
                    "key_as_string": "2018-08-31T14:33:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697240000,
                    "key_as_string": "2018-08-31T14:34:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697300000,
                    "key_as_string": "2018-08-31T14:35:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535697360000,
                    "key_as_string": "2018-08-31T14:36:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697420000,
                    "key_as_string": "2018-08-31T14:37:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697480000,
                    "key_as_string": "2018-08-31T14:38:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697540000,
                    "key_as_string": "2018-08-31T14:39:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697600000,
                    "key_as_string": "2018-08-31T14:40:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535697660000,
                    "key_as_string": "2018-08-31T14:41:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697720000,
                    "key_as_string": "2018-08-31T14:42:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697780000,
                    "key_as_string": "2018-08-31T14:43:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697840000,
                    "key_as_string": "2018-08-31T14:44:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535697900000,
                    "key_as_string": "2018-08-31T14:45:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535697960000,
                    "key_as_string": "2018-08-31T14:46:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535698020000,
                    "key_as_string": "2018-08-31T14:47:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535698080000,
                    "key_as_string": "2018-08-31T14:48:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535698140000,
                    "key_as_string": "2018-08-31T14:49:00.000+08:00"
                },
                {
                    "doc_count": 6,
                    "key": 1535698200000,
                    "key_as_string": "2018-08-31T14:50:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535698260000,
                    "key_as_string": "2018-08-31T14:51:00.000+08:00"
                },
                {
                    "doc_count": 5,
                    "key": 1535698320000,
                    "key_as_string": "2018-08-31T14:52:00.000+08:00"
                }
            ]
        }
    },
    "hits": {
        "hits": [],
        "max_score": 0.0,
        "total": 614
    },
    "timed_out": false,
    "took": 6
}
```
